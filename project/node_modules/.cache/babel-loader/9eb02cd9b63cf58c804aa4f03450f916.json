{"ast":null,"code":"import{Link,useParams}from'react-router-dom';import Form from'../../components/form/form';import Logo from'../../components/logo/logo';import LoginUser from'../../components/login-user/login-user';import{useAppDispatch,useAppSelector}from'../../hooks';import{getFilm}from'../../store/data-loading/selector';import{getFilmFoundStatus}from'../../store/film-screening/selector';import{redirectToRoute}from'../../store/action';import{AppRoute}from'../../const';import{useEffect}from'react';import{fetchLoadFilmAction}from'../../store/api-actions';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function AddReview(){var _useParams=useParams(),id=_useParams.id;var film=useAppSelector(getFilm);var dispatch=useAppDispatch();var isFilmNotFound=useAppSelector(getFilmFoundStatus);useEffect(function(){dispatch(fetchLoadFilmAction(id));},[dispatch,id]);if(isFilmNotFound){dispatch(redirectToRoute(AppRoute.NotFound));}if(!film){return null;}var name=film.name,backgroundImage=film.backgroundImage,posterImage=film.posterImage;return/*#__PURE__*/_jsxs(\"section\",{className:\"film-card film-card--full\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"film-card__header\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"film-card__bg\",children:/*#__PURE__*/_jsx(\"img\",{src:backgroundImage,alt:name})}),/*#__PURE__*/_jsx(\"h1\",{className:\"visually-hidden\",children:\"WTW\"}),/*#__PURE__*/_jsxs(\"header\",{className:\"page-header\",children:[/*#__PURE__*/_jsx(Logo,{}),/*#__PURE__*/_jsx(\"nav\",{className:\"breadcrumbs\",children:/*#__PURE__*/_jsxs(\"ul\",{className:\"breadcrumbs__list\",children:[/*#__PURE__*/_jsx(\"li\",{className:\"breadcrumbs__item\",children:/*#__PURE__*/_jsx(Link,{to:\"/films/\".concat(id),className:\"breadcrumbs__link\",children:name})}),/*#__PURE__*/_jsx(\"li\",{className:\"breadcrumbs__item\",children:/*#__PURE__*/_jsx(Link,{to:\"#\",className:\"breadcrumbs__link\",children:\"Add review\"})})]})}),/*#__PURE__*/_jsx(LoginUser,{})]}),/*#__PURE__*/_jsx(\"div\",{className:\"film-card__poster film-card__poster--small\",children:/*#__PURE__*/_jsx(\"img\",{src:posterImage,alt:name,width:\"218\",height:\"327\"})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"add-review\",children:/*#__PURE__*/_jsx(Form,{})})]});}export default AddReview;","map":{"version":3,"names":["Link","useParams","Form","Logo","LoginUser","useAppDispatch","useAppSelector","getFilm","getFilmFoundStatus","redirectToRoute","AppRoute","useEffect","fetchLoadFilmAction","AddReview","id","film","dispatch","isFilmNotFound","NotFound","name","backgroundImage","posterImage"],"sources":["D:/frontend/Курсы фронтенд/274941-what-to-watch-10/project/src/pages/add-review/add-review.tsx"],"sourcesContent":["import { Link, useParams } from 'react-router-dom';\nimport Form from '../../components/form/form';\nimport Logo from '../../components/logo/logo';\nimport LoginUser from '../../components/login-user/login-user';\nimport { useAppDispatch, useAppSelector } from '../../hooks';\nimport { getFilm } from '../../store/data-loading/selector';\nimport { getFilmFoundStatus } from '../../store/film-screening/selector';\nimport { redirectToRoute } from '../../store/action';\nimport { AppRoute } from '../../const';\nimport { useEffect } from 'react';\nimport { fetchLoadFilmAction } from '../../store/api-actions';\n\n\nfunction AddReview(): JSX.Element | null {\n  const { id } = useParams();\n  const film = useAppSelector(getFilm);\n  const dispatch = useAppDispatch();\n  const isFilmNotFound = useAppSelector(getFilmFoundStatus);\n\n  useEffect(() => {\n    dispatch(fetchLoadFilmAction(id));\n  }, [dispatch, id]);\n\n\n  if (isFilmNotFound) {\n    dispatch(redirectToRoute(AppRoute.NotFound));\n  }\n\n  if (!film) { return null; }\n  const { name, backgroundImage, posterImage } = film;\n\n\n  return (\n    <section className=\"film-card film-card--full\">\n      <div className=\"film-card__header\">\n        <div className=\"film-card__bg\">\n          <img src={backgroundImage} alt={name} />\n        </div>\n        <h1 className=\"visually-hidden\">WTW</h1>\n        <header className=\"page-header\">\n          <Logo />\n          <nav className=\"breadcrumbs\">\n            <ul className=\"breadcrumbs__list\">\n              <li className=\"breadcrumbs__item\">\n                <Link to={`/films/${id}`} className=\"breadcrumbs__link\">{name}</Link>\n              </li>\n              <li className=\"breadcrumbs__item\">\n                <Link to=\"#\" className=\"breadcrumbs__link\">Add review</Link>\n              </li>\n            </ul>\n          </nav>\n          <LoginUser />\n        </header>\n        <div className=\"film-card__poster film-card__poster--small\">\n          <img src={posterImage} alt={name} width=\"218\" height=\"327\" />\n        </div>\n      </div>\n      <div className=\"add-review\">\n        <Form />\n      </div>\n    </section>\n  );\n}\n\nexport default AddReview;\n"],"mappings":"AAAA,OAASA,IAAT,CAAeC,SAAf,KAAgC,kBAAhC,CACA,MAAOC,KAAP,KAAiB,4BAAjB,CACA,MAAOC,KAAP,KAAiB,4BAAjB,CACA,MAAOC,UAAP,KAAsB,wCAAtB,CACA,OAASC,cAAT,CAAyBC,cAAzB,KAA+C,aAA/C,CACA,OAASC,OAAT,KAAwB,mCAAxB,CACA,OAASC,kBAAT,KAAmC,qCAAnC,CACA,OAASC,eAAT,KAAgC,oBAAhC,CACA,OAASC,QAAT,KAAyB,aAAzB,CACA,OAASC,SAAT,KAA0B,OAA1B,CACA,OAASC,mBAAT,KAAoC,yBAApC,C,wFAGA,QAASC,UAAT,EAAyC,CACvC,eAAeZ,SAAS,EAAxB,CAAQa,EAAR,YAAQA,EAAR,CACA,GAAMC,KAAI,CAAGT,cAAc,CAACC,OAAD,CAA3B,CACA,GAAMS,SAAQ,CAAGX,cAAc,EAA/B,CACA,GAAMY,eAAc,CAAGX,cAAc,CAACE,kBAAD,CAArC,CAEAG,SAAS,CAAC,UAAM,CACdK,QAAQ,CAACJ,mBAAmB,CAACE,EAAD,CAApB,CAAR,CACD,CAFQ,CAEN,CAACE,QAAD,CAAWF,EAAX,CAFM,CAAT,CAKA,GAAIG,cAAJ,CAAoB,CAClBD,QAAQ,CAACP,eAAe,CAACC,QAAQ,CAACQ,QAAV,CAAhB,CAAR,CACD,CAED,GAAI,CAACH,IAAL,CAAW,CAAE,MAAO,KAAP,CAAc,CAC3B,GAAQI,KAAR,CAA+CJ,IAA/C,CAAQI,IAAR,CAAcC,eAAd,CAA+CL,IAA/C,CAAcK,eAAd,CAA+BC,WAA/B,CAA+CN,IAA/C,CAA+BM,WAA/B,CAGA,mBACE,iBAAS,SAAS,CAAC,2BAAnB,wBACE,aAAK,SAAS,CAAC,mBAAf,wBACE,YAAK,SAAS,CAAC,eAAf,uBACE,YAAK,GAAG,CAAED,eAAV,CAA2B,GAAG,CAAED,IAAhC,EADF,EADF,cAIE,WAAI,SAAS,CAAC,iBAAd,iBAJF,cAKE,gBAAQ,SAAS,CAAC,aAAlB,wBACE,KAAC,IAAD,IADF,cAEE,YAAK,SAAS,CAAC,aAAf,uBACE,YAAI,SAAS,CAAC,mBAAd,wBACE,WAAI,SAAS,CAAC,mBAAd,uBACE,KAAC,IAAD,EAAM,EAAE,kBAAYL,EAAZ,CAAR,CAA0B,SAAS,CAAC,mBAApC,UAAyDK,IAAzD,EADF,EADF,cAIE,WAAI,SAAS,CAAC,mBAAd,uBACE,KAAC,IAAD,EAAM,EAAE,CAAC,GAAT,CAAa,SAAS,CAAC,mBAAvB,wBADF,EAJF,GADF,EAFF,cAYE,KAAC,SAAD,IAZF,GALF,cAmBE,YAAK,SAAS,CAAC,4CAAf,uBACE,YAAK,GAAG,CAAEE,WAAV,CAAuB,GAAG,CAAEF,IAA5B,CAAkC,KAAK,CAAC,KAAxC,CAA8C,MAAM,CAAC,KAArD,EADF,EAnBF,GADF,cAwBE,YAAK,SAAS,CAAC,YAAf,uBACE,KAAC,IAAD,IADF,EAxBF,GADF,CA8BD,CAED,cAAeN,UAAf"},"metadata":{},"sourceType":"module"}