{"ast":null,"code":"import{useNavigate}from'react-router-dom';import ButtonShowMore from'../../components/button-show-more/button-show-more';import Footer from'../../components/footer/footer';import ListFilms from'../../components/list-films/list-films';import ListGenres from'../../components/list-genres/list-genres';import Logo from'../../components/logo/logo';import LoginUser from'../../components/login-user/login-user';import{useAppDispatch,useAppSelector}from'../../hooks';import{useEffect}from'react';import{getPromo}from'../../store/data-loading/selector';import{getFilms,getFilteredFilms}from'../../store/film-screening/selector';import{cutFilteredFilms,filterByGenre,loadMoreFilms,resetFilms,resetFilter}from'../../store/film-screening/film-screening';import ButtonAddMyList from'../../components/button-add-my-list/button-add-my-list';import{getAuthorizationStatus}from'../../store/user-process/selector';import{isCheckedLogin}from'../../utils';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function Main(){var films=useAppSelector(getFilms);var filteredFilms=useAppSelector(getFilteredFilms);var promo=useAppSelector(getPromo);var authorizationStatus=useAppSelector(getAuthorizationStatus);var _ref=promo!==null&&promo!==void 0?promo:{},id=_ref.id,backgroundImage=_ref.backgroundImage,posterImage=_ref.posterImage,name=_ref.name,genre=_ref.genre,released=_ref.released;var dispatch=useAppDispatch();useEffect(function(){return function(){dispatch(resetFilter());dispatch(cutFilteredFilms());dispatch(resetFilms());};},[dispatch]);var navigate=useNavigate();var onClickPlayHandler=function onClickPlayHandler(){if(!id){return;}navigate(\"/player/\".concat(id.toString()));};var showMoreButtonClickHandle=function showMoreButtonClickHandle(){dispatch(loadMoreFilms());dispatch(filterByGenre());dispatch(cutFilteredFilms());};if(!promo){return null;}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"section\",{className:\"film-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"film-card__bg\",children:/*#__PURE__*/_jsx(\"img\",{src:backgroundImage,alt:name})}),/*#__PURE__*/_jsx(\"h1\",{className:\"visually-hidden\",children:\"WTW\"}),/*#__PURE__*/_jsxs(\"header\",{className:\"page-header film-card__head\",children:[/*#__PURE__*/_jsx(Logo,{}),/*#__PURE__*/_jsx(LoginUser,{})]}),/*#__PURE__*/_jsx(\"div\",{className:\"film-card__wrap\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"film-card__info\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"film-card__poster\",children:/*#__PURE__*/_jsx(\"img\",{src:posterImage,alt:name,width:\"218\",height:\"327\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"film-card__desc\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"film-card__title\",children:name}),/*#__PURE__*/_jsxs(\"p\",{className:\"film-card__meta\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"film-card__genre\",children:genre}),/*#__PURE__*/_jsx(\"span\",{className:\"film-card__year\",children:released})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"film-card__buttons\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn--play film-card__button\",type:\"button\",onClick:onClickPlayHandler,children:[/*#__PURE__*/_jsx(\"svg\",{viewBox:\"0 0 19 19\",width:\"19\",height:\"19\",children:/*#__PURE__*/_jsx(\"use\",{xlinkHref:\"#play-s\"})}),/*#__PURE__*/_jsx(\"span\",{children:\"Play\"})]}),isCheckedLogin(authorizationStatus)?/*#__PURE__*/_jsx(ButtonAddMyList,{idFilm:Number(id)}):'']})]})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"page-content\",children:[/*#__PURE__*/_jsxs(\"section\",{className:\"catalog\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"catalog__title visually-hidden\",children:\"Catalog\"}),/*#__PURE__*/_jsx(ListGenres,{}),/*#__PURE__*/_jsx(ListFilms,{films:films}),filteredFilms.length<=films.length?'':/*#__PURE__*/_jsx(ButtonShowMore,{onClick:showMoreButtonClickHandle})]}),/*#__PURE__*/_jsx(Footer,{})]})]});}export default Main;","map":{"version":3,"names":["useNavigate","ButtonShowMore","Footer","ListFilms","ListGenres","Logo","LoginUser","useAppDispatch","useAppSelector","useEffect","getPromo","getFilms","getFilteredFilms","cutFilteredFilms","filterByGenre","loadMoreFilms","resetFilms","resetFilter","ButtonAddMyList","getAuthorizationStatus","isCheckedLogin","Main","films","filteredFilms","promo","authorizationStatus","id","backgroundImage","posterImage","name","genre","released","dispatch","navigate","onClickPlayHandler","toString","showMoreButtonClickHandle","Number","length"],"sources":["D:/frontend/Курсы фронтенд/274941-what-to-watch-10/project/src/pages/main/main.tsx"],"sourcesContent":["import { useNavigate } from 'react-router-dom';\nimport ButtonShowMore from '../../components/button-show-more/button-show-more';\nimport Footer from '../../components/footer/footer';\nimport ListFilms from '../../components/list-films/list-films';\nimport ListGenres from '../../components/list-genres/list-genres';\nimport Logo from '../../components/logo/logo';\nimport LoginUser from '../../components/login-user/login-user';\nimport { useAppDispatch, useAppSelector } from '../../hooks';\nimport { useEffect } from 'react';\nimport { getPromo } from '../../store/data-loading/selector';\nimport { getFilms, getFilteredFilms } from '../../store/film-screening/selector';\nimport { cutFilteredFilms, filterByGenre, loadMoreFilms, resetFilms, resetFilter } from '../../store/film-screening/film-screening';\nimport ButtonAddMyList from '../../components/button-add-my-list/button-add-my-list';\nimport { getAuthorizationStatus } from '../../store/user-process/selector';\nimport { isCheckedLogin } from '../../utils';\n\nfunction Main(): JSX.Element | null {\n  const films = useAppSelector(getFilms);\n  const filteredFilms = useAppSelector(getFilteredFilms);\n  const promo = useAppSelector(getPromo);\n  const authorizationStatus = useAppSelector(getAuthorizationStatus);\n\n  const { id, backgroundImage, posterImage, name, genre, released } = promo ?? {};\n\n  const dispatch = useAppDispatch();\n\n  useEffect(() => () => {\n    dispatch(resetFilter());\n    dispatch(cutFilteredFilms());\n    dispatch(resetFilms());\n  }, [dispatch]);\n\n  const navigate = useNavigate();\n  const onClickPlayHandler = () => {\n    if (!id) { return; }\n    navigate(`/player/${id.toString()}`);\n  };\n\n  const showMoreButtonClickHandle = () => {\n    dispatch(loadMoreFilms());\n    dispatch(filterByGenre());\n    dispatch(cutFilteredFilms());\n  };\n\n  if (!promo) { return null; }\n\n  return (\n    <>\n      <section className=\"film-card\">\n        <div className=\"film-card__bg\">\n          <img src={backgroundImage} alt={name} />\n        </div>\n        <h1 className=\"visually-hidden\">WTW</h1>\n        <header className=\"page-header film-card__head\">\n          <Logo />\n          <LoginUser />\n        </header>\n        <div className=\"film-card__wrap\">\n          <div className=\"film-card__info\">\n            <div className=\"film-card__poster\">\n              <img src={posterImage} alt={name} width=\"218\" height=\"327\" />\n            </div>\n            <div className=\"film-card__desc\">\n              <h2 className=\"film-card__title\">{name}</h2>\n              <p className=\"film-card__meta\">\n                <span className=\"film-card__genre\">{genre}</span>\n                <span className=\"film-card__year\">{released}</span>\n              </p>\n              <div className=\"film-card__buttons\">\n                <button className=\"btn btn--play film-card__button\"\n                  type=\"button\"\n                  onClick={onClickPlayHandler}\n                >\n                  <svg viewBox=\"0 0 19 19\" width=\"19\" height=\"19\">\n                    <use xlinkHref=\"#play-s\"></use>\n                  </svg>\n                  <span>Play</span>\n                </button>\n                {\n                  isCheckedLogin(authorizationStatus)\n                    ? <ButtonAddMyList idFilm={Number(id)} />\n                    : ''\n                }\n              </div>\n            </div>\n          </div>\n        </div>\n      </section>\n      <div className=\"page-content\">\n        <section className=\"catalog\">\n          <h2 className=\"catalog__title visually-hidden\">Catalog</h2>\n          <ListGenres />\n          <ListFilms films={films} />\n          {\n            filteredFilms.length <= films.length\n              ? ''\n              : <ButtonShowMore onClick={showMoreButtonClickHandle} />\n          }\n        </section>\n        <Footer />\n      </div>\n    </>\n  );\n}\n\nexport default Main;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}